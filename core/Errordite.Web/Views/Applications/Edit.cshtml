@using Errordite.Web.Extensions
@using Errordite.Web.Models.Applications
@model EditApplicationViewModel
           
@{
    ViewBag.Title = "Edit Application";
}

@section header
{
    @Html.Partial("Admin/Tabs")
}

<section class="centered">
    <div class="content">
        @using (Html.BeginForm("edit", "applications", FormMethod.Post, new { id = "editapplicationForm" }))
        {
        @Html.HiddenFor(m => m.Id)
        @Html.HiddenFor(m => m.MatchRuleFactoryId)

        <h1 class="section-header border">Edit application</h1>
            <div class="form double">
                <ul>
                    <li>
                        @Html.LabelFor(m => m.Name, "Name")
                        @Html.TextBoxFor(m => m.Name)
                        @Html.ValidationMessageFor(m => m.Name)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.Version, "Version")
                        @Html.TextBoxFor(m => m.Version)
                        <i data-title="All errors received into this application will be tagged with this version number, update it when you deploy a new build." class="icon-info"></i>
                        @Html.ValidationMessageFor(m => m.Version)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.UserId, "Default assigned user")
                        @Html.DropDownListFor(m => m.UserId, Model.Users)
                        <i data-title="Who will the default assignee be for issues created within this application?" class="icon-info"></i>
                        @Html.ValidationMessageFor(m => m.UserId)
                    </li>
                    <li class="sublist">
                        @Html.LabelFor(m => m.NotificationGroups, "Send notifications to these groups")
                        <ul>
                            @Html.EditorFor(m => m.NotificationGroups)
                        </ul>
                    </li>
                    <li class="inline">
                        @Html.CheckBoxFor(m => m.IsActive) 
                        @Html.LabelFor(m => m.IsActive, "Activate application")
                        <i data-title="Only active applications will receive errors and have issues created." class="icon-info"></i>
                    </li>
                    <li class="buttons">
                        <input type="submit" class="btn btn-medium btn-blue" value="Save" />
                        <a href="@Url.Applications()" class="btn btn-grey btn-medium">Cancel</a>
                    </li>
                </ul>
            </div>
            <div class="form double">
                <ul>
                    <li>
                        @Html.LabelFor(m => m.HipChatRoomId, "HipChat room number")
                        @Html.TextBoxFor(m => m.HipChatRoomId)
                        <i data-title="Tell us the HipChat room number you want notifications for this application to go to." class="icon-info"></i>
                        @Html.ValidationMessageFor(m => m.HipChatRoomId)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.HipChatAuthToken, "HipChat auth token")
                        @Html.TextBoxFor(m => m.HipChatAuthToken)
                        <i data-title="We need your HipChat auth token to allow us to post to your room." class="icon-info"></i>
                        @Html.ValidationMessageFor(m => m.HipChatAuthToken)
                    </li>
                </ul>
            </div>
        }
    </div>
</section>
